<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>チュートリアル | 【Python】Tkinterで競馬の着順掲示板を作る</title>
    <link rel="stylesheet" type="text/css" href="css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="css/webstyle.css" />
    <link rel="next" title="設定画面を完成させる" href="03-configwindow.html">
    <link rel="prev" title="インストール" href="01-install.html">
    <meta name="generator" content="Re:VIEW Starter">
  </head>
  <body>
    <div class="page-outer">
      <nav class="side-content">
                <div class="rebuild">
          <a href="javascript:void(0)" onclick="rebuildAndReloadForcedly()">Rebuild and Reload</a>
        </div>
                <a class="nav-title" href="index.html">【Python】Tkinterで競馬の着順掲示板を作る</a>
<ul class="toc toc-1">
    <li class="toc-chapter"><a href="./00-preface.html">まえがき</a></li>
    <li class="toc-chapter"><a href="./01-install.html">1 インストール</a></li>
    <li class="toc-chapter"><a href="./02-tuto.html">2 チュートリアル</a>
      <ul class="toc toc-2">
        <li class="toc-section"><a href="#h2-1">2.1 完成イメージ</a></li>
        <li class="toc-section"><a href="#h2-2">2.2 ウィンドウの作成</a></li>
        <li class="toc-section"><a href="#h2-3">2.3 ラベルの配置</a></li>
        <li class="toc-section"><a href="#h2-4">2.4 次の章に向けての下準備</a></li>
      </ul>
    </li>
    <li class="toc-chapter"><a href="./03-configwindow.html">3 設定画面を完成させる</a></li>
    <li class="toc-chapter"><a href="./04-makeboard.html">4 着順掲示板を作る</a></li>
    <li class="toc-chapter"><a href="./99-postface.html">あとがき</a></li>
</ul>
      </nav>
      <div class="page-inner">
        <header class="page-header">
        </header>
        <main class="page-main">
<h1 class="boldlines center twolines"><a id="h2"></a><span class="secno">第2章</span> <br/>チュートリアル</h1>
<div class="abstract">
<p>ウィンドウの作成、ラベルの配置について学んでいきます。</p>
</div>

<h2 id="compimage" class="leftline"><a id="h2-1"></a><span class="secno">2.1</span> 完成イメージ</h2>
<p>プログラムを書き始める前に、完成イメージを示しておきます。このプログラムは、の設定画面と、の掲示板部分の二つのウィンドウで構成されます。</p>
<p>電光掲示板は競馬場によって微妙に違いがあるのですが、今回は東京競馬場で使用されているものを参考に作成していきます。</p>

<h2 id="make-window" class="leftline"><a id="h2-2"></a><span class="secno">2.2</span> ウィンドウの作成</h2>
<p>それではプログラムを書いていきましょう。はじめに、Pythonのファイルを作成し、<span class="listref"><a href="./02-tuto.html#win1">リスト2.1</a></span>に示すコードを書き込んでください。本書のプログラムは、このファイルのみで完結します。</p>
<div id="win1" class="caption-code">
<span class="caption">リスト2.1: リスト2.1: arrivalboard.py</span>
<pre class="list">import tkinter as tk <span class="balloon">← Tkinterモジュールの読み込み</span>

root = tk.Tk() <span class="balloon">← インスタンスの作成</span>

root.geometry('225x500')<span class="balloon">← ウィンドウを作成</span>
root.resizable(False, False)
root.title('設定画面')

root.mainloop()<span class="balloon">← ループ処理の実行</span>
</pre>
</div>
<p>はじめに、Tkinterのライブラリをインポートします。今後、Tkinterの関数を何度も使うことになりますが、その度に<code class="inline-code">tkinter</code>と書くのは面倒なので、<code class="inline-code">as</code>を利用して<code class="inline-code">tk</code>という名前でインポートしています。</p>
<p>次に、Tkクラスのインスタンスを作成します。いきなり何を言っているんだという感じですが、クラスとインスタンスに関する解説をすると、初心者向けの範囲を逸脱してしまうので、ここでは省略いたします。ここではおまじないとして見ていただいて構いません。</p>
<p>続いて、ウィンドウの設定をしていきます。<code class="inline-code">geometry()</code>でウィンドウのサイズを設定し、<code class="inline-code">resizable()</code>でサイズの変更を禁止しています。二つのFalseはそれぞれ横方向と縦方向に対応しています。最後に<code class="inline-code">title()</code>でタイトルを設定します。このウィンドウはのちに掲示板の表示内容を設定するために使うので、名前を「設定画面」としておきます。</p>
<p>最後に、<code class="inline-code">mainloop()</code>によって、待機状態に入ります。この文を忘れると、プログラムを実行した直後にウィンドウが消えてしまいます。また、この文の後に書かれたコードはウィンドウが消えるまで実行されません。</p>
<p>それでは、プログラムを実行してみましょう。</p>
<div id="exe1" class="cmd-code">
<span class="caption">リスト2.2: リスト2.2: プログラムの実行</span>
<pre class="list">$ <span class="userinput">python3 arrivalboard.py</span>
</pre>
</div>
<p>プログラムを実行すると、<span class="imgref"><a href="./02-tuto.html#window1">図2.1</a></span>のように、サイズを変更できないウィンドウのみが表示されるはずです。×ボタンを押すとウィンドウが閉じられ、プログラムの実行も終了します。</p>
<div id="window1" class="image">
<img src="images/02-tuto/window1.png" alt="実行結果" class="img border" />
<p class="caption">
図2.1: 実行結果
</p>
</div>
<p></p>
<hr />
<p></p>

<h2 id="make-text" class="leftline"><a id="h2-3"></a><span class="secno">2.3</span> ラベルの配置</h2>
<p>次に、ラベルを配置してみます。ラベルは、テキストや画像を表示するための部品で、Tkinterの基本的なものになります。先ほど作成したプログラムに、<span class="listref"><a href="./02-tuto.html#text1">リスト2.3</a></span>のようにコードを追加します。</p>
<p>ここで追加するラベルは、次章以降で追加していく要素の下準備を兼ねています。</p>
<div id="text1" class="caption-code">
<span class="caption">リスト2.3: リスト2.3: ラベルの配置</span>
<pre class="list">import tkinter as tk <span class="balloon">← Tkinterモジュールの読み込み</span>

root = tk.Tk() <span class="balloon">← インスタンスの作成</span>

root.geometry('225x500')<span class="balloon">← ウィンドウを作成</span>
root.resizable(False, False)
root.title('設定画面')

<b>joumei = tk.Label(root, text='場名')</b> <span class="balloon">← ラベルの設定:レース場名</span>

<b>joumei.grid(column=0, row=0)</b> <span class="balloon">← ラベルの配置</span>

root.mainloop() <span class="balloon">← ループ処理の実行</span>
</pre>
</div>
<p>ラベルを配置する際は、<code class="inline-code">Label()</code>を使用します。ここでは第一引数にラベルを配置するウィンドウを、第二引数にはテキストの内容を代入しています。さらに細かい設定をすることができますが、その説明はこの章では行いません。</p>
<p>ラベルは宣言しただけでは表示されず、配置をしてようやく表示されます。これはほかの部品(ウィジェットと呼びます)についても同じことが言えます。ここでは、<code class="inline-code">grid()</code>を使用して配置します。<code class="inline-code">grid()</code>はウィンドウを行と列に分けて、ウィジェットを格子状に配置します。</p>
<p>ウィジェットを配置する方法として、他に<code class="inline-code">place()</code>と<code class="inline-code">pack()</code>がありますが、この二つはのちほど紹介します。</p>
<p>コードを追加し終わったら、<span class="listref"><a href="./02-tuto.html#exe1">リスト2.2</a></span>のコマンドでプログラムを実行しましょう。<span class="imgref"><a href="./02-tuto.html#window2">図2.2</a></span>のように表示されれば成功です。後にウィジェットを追加する都合上とても寂しい見た目になっていますが、これでラベルの配置ができました。</p>
<div id="window2" class="image">
<img src="images/02-tuto/window2.png" alt="ラベルを配置した結果" class="img border" />
<p class="caption">
図2.2: ラベルを配置した結果
</p>
</div>
<p></p>
<hr />
<p></p>

<h2 id="shita" class="leftline"><a id="h2-4"></a><span class="secno">2.4</span> 次の章に向けての下準備</h2>
<p>次の章では、メニュー、ボックス、ボタンの作成方法を学んでいきます。その前に、あらかじめラベルを配置しておきましょう。プログラムを次のように変更していくわけですが……</p>
<div id="text2" class="caption-code">
<span class="caption">リスト2.4: リスト2.4: ラベルの追加</span>
<pre class="list">joumei = tk.Label(root, text='場名') <span class="balloon">← ラベルの設定:レース場名</span>
<b>raceno = tk.Label(root, text='R')</b> <span class="balloon">← レース番号</span>
<b>first_p =tk.Label(root, text='1着馬')</b> <span class="balloon">← n着馬</span>
<b>second_p =tk.Label(root, text='2着馬')</b>
<b>third_p =tk.Label(root, text='3着馬')</b>
<b>fourth_p =tk.Label(root, text='4着馬')</b>
<b>fifth_p =tk.Label(root, text='5着馬')</b>

joumei.grid(column=0, row=0) <span class="balloon">← ラベルの配置</span>
<b>raceno.grid(column=0, row=1)</b>
<b>first_p.grid(column=0, row=2)</b>
<b>second_p.grid(column=0, row=3)</b>
<b>third_p.grid(column=0, row=4)</b>
<b>fourth_p.grid(column=0, row=5)</b>
<b>fifth_p.grid(column=0, row=6)</b>
</pre>
</div>
<p>似たようなコードが繰り返されていて無駄が多いですね。ということで、<span class="listref"><a href="./02-tuto.html#text3">リスト2.5</a></span>のように変更してしまいます。</p>
<div id="text3" class="caption-code">
<span class="caption">リスト2.5: リスト2.5: ラベルの追加（変更版）</span>
<pre class="list"><b>labels = []</b> <span class="balloon">← 設定画面のラベル用配列</span>

<del>joumei = tk.Label(root, text='場名')</del> <span class="balloon">← ラベルの設定:レース場名</span>
<del>raceno = tk.Label(root, text='R')</del> <span class="balloon">← レース番号</span>
<del>first_p =tk.Label(root, text='1着馬')</del> <span class="balloon">← n着馬</span>
<del>second_p =tk.Label(root, text='2着馬')</del>
<del>third_p =tk.Label(root, text='3着馬')</del>
<del>fourth_p =tk.Label(root, text='4着馬')</del>
<del>fifth_p =tk.Label(root, text='5着馬')</del>
<b>labels.append(tk.Label(root, text='場名'))</b> <span class="balloon">← ラベルの設定:レース場名</span>
<b>labels.append(tk.Label(root, text='R'))</b> <span class="balloon">← レース番号</span>

<b>for i in range(1,6):</b>
<b>    labels.append(tk.Label(root, text=str(i) + &quot;着馬&quot;))</b> <span class="balloon">← n着馬</span>

<del>joumei.grid(column=0, row=0)</del> <span class="balloon">← ラベルの配置</span>
<del>raceno.grid(column=0, row=1)</del>
<del>first_p.grid(column=0, row=2)</del>
<del>second_p.grid(column=0, row=3)</del>
<del>third_p.grid(column=0, row=4)</del>
<del>fourth_p.grid(column=0, row=5)</del>
<del>fifth_p.grid(column=0, row=6)</del>
<b>for i in range(len(labels)):</b>
<b>    labels[i].grid(column=0, row=i)</b>
</pre>
</div>
<p>この状態のプログラムを実行してみます。ラベルを配列にまとめても、ラベルを配置できることがわかります。これで、大幅に無駄を削減できました。</p>
<p>しかし、これはプログラムの完成形が決まっており、かつ後からラベルの内容を変更したり、別の箇所で呼び出したりしないためにできることであって、どのような場面でも効果的に活用できる方法ではないことに留意が必要です。第3章以降では、この方法は使用しません。</p>
<p>残りのラベルも配置していきます。</p>
<div id="text4" class="caption-code">
<span class="caption">リスト2.6: リスト2.6: 残りのラベルの追加</span>
<pre class="list">labels.append(tk.Label(root, text='場名')) <span class="balloon">← ラベルの設定:レース場名</span>
labels.append(tk.Label(root, text='R'))  <span class="balloon">← レース番号</span>

for i in range(1,6):
    labels.append(tk.Label(root, text=str(i) + &quot;着馬&quot;)) <span class="balloon">← n着馬</span>

<b>for i in range(1,5):</b>
<b>    labels.append(tk.Label(root, text='着差' + str(i) + &quot;,&quot; + str(i+1)))</b> <span class="balloon">← 着差</span>

<b>labels.append(tk.Label(root, text='芝'))</b> <span class="balloon">← 馬場状態</span>
<b>labels.append(tk.Label(root, text='ダート'))</b>

<b>labels.append(tk.Label(root, text='状況'))</b> <span class="balloon">← 確定状況</span>
<b>abels.append(tk.Label(root, text='レコード')) </b>

<b>labels.append(tk.Label(root, text='time min.'))</b> <span class="balloon">← 入線タイム</span>
<b>labels.append(tk.Label(root, text='time sec'))</b>
<b>labels.append(tk.Label(root, text='time 1/10'))</b>

<b>labels.append(tk.Label(root, text='4F sec'))</b> <span class="balloon">← 4ハロン</span>
<b>labels.append(tk.Label(root, text='4F 1/10 sec'))</b>

<b>labels.append(tk.Label(root, text='3F sec'))</b> <span class="balloon">← 3ハロン</span>
<b>labels.append(tk.Label(root, text='3F 1/10 sec'))</b>

for i in range(len(labels)): <span class="balloon">← ラベルの配置</span>
    labels[i].grid(column=0, row=i)
</pre>
</div>
<p>これでこの章の内容は終わりです。プログラムを実行した際に<span class="imgref"><a href="./02-tuto.html#window4">図2.3</a></span>のようになっていればOKです。</p>
<div id="window4" class="image">
<img src="images/02-tuto/window4.png" alt="2章の完成形" class="img border" />
<p class="caption">
図2.3: 2章の完成形
</p>
</div>

        </main>
        <nav class="page-navi">
          <a href="01-install.html" class="page-prev">&#9664;</a>
          <a href="03-configwindow.html" class="page-next">&#9654;</a>
        </nav>
        <footer>
        </footer>
      </div>
    </div>
    <script>
function rebuildAndReloadForcedly() {
  fetch('/rebuild.js').then((resp)=>{
    resp.text().then((text)=>{ eval(text); });
  });
}
    </script>
    <script src="/rebuild.js?file=02-tuto.re"></script>
  </body>
</html>
<!-- layout.html5.erb -->
